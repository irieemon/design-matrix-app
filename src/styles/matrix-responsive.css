/**
 * RESPONSIVE MATRIX DESIGN SYSTEM
 *
 * Mobile-first responsive design with optimal experience across all devices.
 * Maintains functionality and accessibility at every breakpoint.
 */

/* ===== RESPONSIVE BREAKPOINT SYSTEM ===== */

/* Mobile First Base Styles (320px+) */
.matrix-responsive {
  /* Base mobile layout */
  width: 100%;
  min-height: 300px;
  padding: var(--space-sm);
  margin: 0 auto;

  /* Ensure touch-friendly interactions */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* ===== RESPONSIVE MATRIX CONTAINER ===== */
/* Matrix now scales coordinates dynamically to fill available space */
.matrix-container {
  width: 100%;
  max-width: 1200px;  /* Maximum width for large screens */
  aspect-ratio: 1 / 1;  /* Maintain square aspect */
  margin: 0 auto;  /* Center the matrix */
  position: relative;  /* For absolute positioned children */
}

/* ===== SMALL MOBILE (320px - 479px) ===== */
@media (max-width: 479px) {
  .matrix-container {
    height: 320px;
    border-radius: var(--radius-lg);
    margin: var(--space-sm);
  }

  .matrix-grid {
    /* Simplified grid for small screens */
    background-size:
      100% 100%,
      100% 100%,
      15px 15px,
      15px 15px;
    opacity: 0.3;
  }

  /* Quadrant labels - minimal design */
  .matrix-quadrant-label {
    padding: var(--space-xs);
    font-size: 10px;
    font-weight: var(--font-medium);
    border-radius: var(--radius-md);

    /* Smaller positioning offsets */
    top: var(--space-sm);
    left: var(--space-sm);
    right: var(--space-sm);
    bottom: 60px; /* Account for axis labels */

    /* Reduce visual complexity */
    backdrop-filter: var(--backdrop-blur-sm);
    box-shadow: var(--shadow-sm);
  }

  /* Hide subtitle text on very small screens */
  .matrix-quadrant-subtitle {
    display: none;
  }

  /* Axis labels - compact */
  .matrix-axis {
    padding: 4px 8px;
    font-size: 10px;
    border-radius: var(--radius-sm);
  }

  .matrix-axis-x {
    bottom: 8px;
  }

  .matrix-axis-y {
    left: 8px;
  }

  /* Cards - ultra compact */
  .idea-card-base {
    width: 100px !important;
    min-height: 60px !important;
    padding: var(--space-xs) !important;
    font-size: var(--text-xs);
  }

  /* Center point - minimal */
  .matrix-center-point {
    width: 4px;
    height: 4px;
    animation: none; /* Remove animations for performance */
  }

  /* Touch-optimized buttons */
  .idea-card-action-btn {
    width: 32px;
    height: 32px;
    touch-action: manipulation;
  }
}

/* ===== MOBILE (480px - 767px) ===== */
@media (min-width: 480px) and (max-width: 767px) {
  .matrix-container {
    height: 400px;
    border-radius: var(--radius-xl);
  }

  .matrix-grid {
    background-size:
      100% 100%,
      100% 100%,
      20px 20px,
      20px 20px;
    opacity: 0.4;
  }

  .matrix-quadrant-label {
    padding: var(--space-sm);
    font-size: var(--text-xs);
  }

  .matrix-axis {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--text-xs);
  }

  /* Cards - mobile optimized */
  .idea-card-base {
    width: 140px !important;
    min-height: 80px !important;
    padding: var(--space-sm) !important;
  }

  /* Always show action buttons on mobile */
  .idea-card-actions {
    opacity: 1 !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
  }
}

/* ===== TABLET PORTRAIT (768px - 1023px) ===== */
@media (min-width: 768px) and (max-width: 1023px) {
  .matrix-container {
    height: 500px;
    max-width: 700px;
    margin: 0 auto;
  }

  .matrix-grid {
    background-size:
      100% 100%,
      100% 100%,
      25px 25px,
      25px 25px;
    opacity: 0.5;
  }

  .matrix-quadrant-label {
    padding: var(--space-sm) var(--space-md);
    font-size: var(--text-sm);
  }

  /* Standard card size for tablets */
  .idea-card-base {
    width: 180px !important;
    min-height: 120px !important;
  }

  /* Enhanced hover states for tablets with mouse support */
  @media (hover: hover) {
    .matrix-quadrant-label:hover {
      transform: scale(1.02);
    }
  }
}

/* ===== TABLET LANDSCAPE / SMALL DESKTOP (1024px - 1199px) ===== */
@media (min-width: 1024px) and (max-width: 1199px) {
  .matrix-container {
    height: 550px;
    max-width: 900px;
    margin: 0 auto;
  }

  .matrix-grid {
    background-size:
      100% 100%,
      100% 100%,
      30px 30px,
      30px 30px;
  }

  .matrix-quadrant-label {
    padding: var(--space-md);
    font-size: var(--text-sm);
  }

  /* Desktop-like card experience */
  .idea-card-base {
    width: 200px !important;
    min-height: 130px !important;
  }
}

/* ===== DESKTOP (1200px - 1439px) ===== */
@media (min-width: 1200px) and (max-width: 1439px) {
  .matrix-container {
    height: 600px;
    max-width: 1000px;
  }

  .matrix-grid {
    background-size:
      100% 100%,
      100% 100%,
      40px 40px,
      40px 40px;
  }

  /* Full-featured desktop experience */
  .matrix-quadrant-label {
    padding: var(--space-md) var(--space-lg);
  }

  .idea-card-base {
    width: 220px !important;
    min-height: 140px !important;
  }

  /* Enhanced animations for desktop */
  .matrix-center-point {
    animation: center-pulse-enhanced 4s ease-in-out infinite;
  }
}

/* ===== LARGE DESKTOP (1440px - 1919px) ===== */
@media (min-width: 1440px) and (max-width: 1919px) {
  .matrix-container {
    height: 650px;
    max-width: 1200px;
  }

  .matrix-grid {
    background-size:
      100% 100%,
      100% 100%,
      50px 50px,
      50px 50px;
  }

  /* Premium desktop experience */
  .matrix-quadrant-label {
    padding: var(--space-lg) var(--space-xl);
    font-size: var(--text-base);
  }

  .idea-card-base {
    width: 240px !important;
    min-height: 150px !important;
  }

  /* Enhanced glass morphism */
  .matrix-container {
    backdrop-filter: var(--backdrop-blur-lg) saturate(150%);
  }
}

/* ===== ULTRA-WIDE DESKTOP (1920px+) ===== */
@media (min-width: 1920px) {
  .matrix-container {
    height: 700px;
    max-width: 1400px;
  }

  .matrix-grid {
    background-size:
      100% 100%,
      100% 100%,
      60px 60px,
      60px 60px;
  }

  /* Ultra-premium experience */
  .matrix-quadrant-label {
    padding: var(--space-xl) var(--space-2xl);
    font-size: var(--text-lg);
  }

  .idea-card-base {
    width: 260px !important;
    min-height: 160px !important;
  }

  /* Maximum visual fidelity */
  .matrix-container {
    backdrop-filter: var(--backdrop-blur-xl) saturate(160%);
    box-shadow: var(--shadow-2xl);
  }
}

/* ===== ORIENTATION HANDLING ===== */

/* Landscape optimizations for mobile */
@media (max-height: 500px) and (orientation: landscape) {
  .matrix-container {
    height: 250px;
  }

  .matrix-quadrant-label {
    padding: var(--space-xs);
    font-size: 10px;
  }

  .idea-card-base {
    width: 120px !important;
    min-height: 70px !important;
    padding: var(--space-xs) !important;
  }

  /* Hide less critical elements in landscape */
  .matrix-axis {
    display: none;
  }
}

/* ===== DEVICE-SPECIFIC OPTIMIZATIONS ===== */

/* Touch devices */
@media (hover: none) and (pointer: coarse) {
  /* Always show interactive elements */
  .idea-card-actions {
    opacity: 1 !important;
    pointer-events: auto !important;
  }

  /* Larger touch targets */
  .idea-card-action-btn {
    min-width: 44px;
    min-height: 44px;
  }

  .matrix-quadrant-label {
    min-height: 44px;
    display: flex;
    align-items: center;
  }

  /* Remove hover states */
  .matrix-quadrant-label:hover {
    transform: none;
  }

  .idea-card-base:hover {
    transform: none;
    box-shadow: var(--shadow-card);
  }
}

/* Devices with precise pointers (mouse) */
@media (hover: hover) and (pointer: fine) {
  /* Enhanced hover interactions */
  .idea-card-base:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--shadow-card-hover);
  }

  .matrix-quadrant-label:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-lg);
  }

  /* Hide actions until hover */
  .idea-card-actions {
    opacity: 0;
    pointer-events: none;
  }

  .idea-card-base:hover .idea-card-actions {
    opacity: 1;
    pointer-events: auto;
  }
}

/* ===== HIGH DPI DISPLAY OPTIMIZATIONS ===== */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .matrix-container,
  .idea-card-base,
  .matrix-quadrant-label {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Crisp borders on high DPI */
  .matrix-container {
    border-width: 0.5px;
  }

  .idea-card-base {
    border-width: 0.5px;
  }
}

/* ===== PRINT STYLES ===== */
@media print {
  .matrix-container {
    background: white !important;
    box-shadow: none !important;
    border: 2px solid black !important;
    backdrop-filter: none !important;
  }

  .matrix-grid {
    opacity: 1 !important;
    background-image:
      linear-gradient(to right, black 1px, transparent 1px),
      linear-gradient(to bottom, black 1px, transparent 1px) !important;
  }

  /* Hide interactive elements */
  .idea-card-actions,
  .matrix-center-point {
    display: none !important;
  }

  /* Ensure readability */
  .matrix-quadrant-label,
  .idea-card-base {
    background: white !important;
    color: black !important;
    border: 1px solid black !important;
  }
}

/* ===== ACCESSIBILITY ENHANCEMENTS ===== */

/* Large text support */
@media (prefers-reduced-motion: reduce) {
  .matrix-container,
  .idea-card-base,
  .matrix-quadrant-label {
    transition: none !important;
    animation: none !important;
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .matrix-container {
    /* SOFTENED: Use design system border instead of harsh black */
    border: 2px solid var(--color-neutral-400);
    background: white;
  }

  .matrix-grid {
    opacity: 1;
  }

  /* FIXED: Remove borders from cards to prevent L-shaped corners */
  .idea-card-base {
    border: none;
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }

  .matrix-quadrant-label {
    border: 1px solid var(--color-neutral-300);
    background: white;
  }

  /* Ensure axis labels remain visible */
  .matrix-axis {
    color: var(--color-neutral-900);
    background: white;
    border: 1px solid var(--color-neutral-400);
  }
}

/* Force colors mode (Windows High Contrast) */
@media (forced-colors: active) {
  .matrix-container,
  .idea-card-base,
  .matrix-quadrant-label {
    forced-color-adjust: none;
    background: Canvas;
    color: CanvasText;
    border-color: CanvasText;
  }
}

/* ===== CONTAINER QUERIES (Future-proofing) ===== */
@supports (container-type: inline-size) {
  .matrix-responsive {
    container-type: inline-size;
  }

  /* Adjust based on container width, not viewport */
  @container (max-width: 400px) {
    .idea-card-base {
      width: 100px !important;
    }
  }

  @container (min-width: 800px) {
    .idea-card-base {
      width: 240px !important;
    }
  }
}