/* ===================================================================
   SIDEBAR COLLAPSIBLE SECTIONS - CSS-ONLY SOLUTION
   ===================================================================

   Design Philosophy:
   - No inline styles - CSS classes control all states
   - Horizontal collapse (sidebar width) is INDEPENDENT from vertical collapse (section height)
   - When sidebar is collapsed horizontally, icons ALWAYS remain visible
   - When sidebar is expanded, sections can collapse/expand vertically
   - Smooth transitions with GPU acceleration
   - Accessibility: Proper ARIA attributes and keyboard navigation

   State Classes:
   - .sidebar-section-collapsed: Sidebar is horizontally collapsed (icons visible)
   - .sidebar-section-expanded: Sidebar expanded + section expanded (full content)
   - .sidebar-section-hidden: Sidebar expanded + section collapsed (hidden content)

   =================================================================== */

/* Base section styling */
.sidebar-section {
  overflow: hidden;
  transition: max-height 300ms cubic-bezier(0.4, 0, 0.2, 1),
              opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: max-height, opacity;
}

/* State 1: SIDEBAR COLLAPSED - Icons always visible (no height restriction) */
.sidebar-section-collapsed {
  max-height: none !important; /* Override any inline styles */
  opacity: 1;
  overflow: visible; /* Allow icons to be fully visible */
}

/* State 2: SIDEBAR EXPANDED + Section Expanded - Full content visible */
.sidebar-section-expanded {
  max-height: 1000px; /* Large enough for all content */
  opacity: 1;
  overflow: visible; /* Allow smooth transitions */
}

/* State 3: SIDEBAR EXPANDED + Section Collapsed - Content hidden */
.sidebar-section-hidden {
  max-height: 0 !important;
  opacity: 0;
  overflow: hidden; /* Hide content when collapsed */
  margin: 0;
  padding: 0;
}

/* Smooth transitions for section content */
.sidebar-section > * {
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-section-hidden > * {
  opacity: 0;
  pointer-events: none;
}

/* Ensure icons remain visible during all transitions */
.sidebar-section-collapsed button,
.sidebar-section-expanded button {
  opacity: 1;
  pointer-events: auto;
}

/* Accessibility: Focus states */
.sidebar-section button:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 0.75rem;
}

/* Performance optimization: GPU acceleration */
.sidebar-section {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Edge case: Rapid toggling protection */
.sidebar-section {
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-delay: 0ms;
}

/* Prevent layout shift during transitions */
.sidebar-section-expanded,
.sidebar-section-hidden {
  min-height: 0;
}

/* Ensure proper stacking context */
.sidebar-section {
  position: relative;
  z-index: 1;
}
